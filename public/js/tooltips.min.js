const _0x3c20 = [
  "pageX",
  "hideLoading",
  "prototype",
  "documentElement",
  "mouseenter",
  "left",
  "useable",
  "itemId",
  "showLoading",
  "offsetWidth",
  "style",
  "getAttribute",
  "remove",
  "status",
  "responseText",
  "div",
  "httpGet",
  "itemData",
  "open",
  "loadingCom",
  "http",
  "onload",
  "setToolTipMove",
  "domEventListener",
  "itemDom",
  "append",
  "<p>鍔犺浇涓�...</p>",
  "stylesheet",
  "itemDetail",
  "https://www.damijing.com/item/",
  "https://static.damijing.com/wow/open/tooltip.css.min.css",
  "tooltipBox",
  "distanceLeft",
  "className",
  "httpItemRequestUrl",
  "indexOf",
  "innerHTML",
  "pageY",
  "damijing-open-tooltip",
  "length",
  "forEach",
  "send",
  "domInit",
  "point",
  "text/css",
  "top",
  "href",
  "httpPost",
  "mouseout",
  "rel",
  "split",
  "onreadystatechange",
  "createElement",
  "readyState",
  "addEventListener",
];
const _0x3bc9 = function (_0x3c20a4, _0x3bc9eb) {
  _0x3c20a4 = _0x3c20a4 - 0x0;
  let _0x215070 = _0x3c20[_0x3c20a4];
  return _0x215070;
};
window[_0x3bc9("0x15")] = function () {
  loadCSS(_0x3bc9("0x1e"));
  let _0x545017 = new wowDamijingOpenApi();
  _0x545017[_0x3bc9("0x2a")]();
};
function loadCSS(_0x1d76b2) {
  var _0x388e19 = document[_0x3bc9("0x34")]("link");
  _0x388e19[_0x3bc9("0x31")] = _0x3bc9("0x1b");
  _0x388e19["type"] = _0x3bc9("0x2c");
  _0x388e19["href"] = _0x1d76b2;
  document["getElementsByTagName"]("head")[0x0]["appendChild"](_0x388e19);
}
let wowDamijingOpenApi = function (_0x40ecd4 = "") {
  this["appId"] = _0x40ecd4;
  this[_0x3bc9("0x14")] = new XMLHttpRequest();
  this[_0x3bc9("0x22")] = "https://open.damijing.com/api/tooltip/item/";
};
wowDamijingOpenApi[_0x3bc9("0x2")][_0x3bc9("0x10")] = function (_0x18ae07) {
  if (!this[_0x3bc9("0x14")]) this["http"] = new XMLHttpRequest();
  this[_0x3bc9("0x14")][_0x3bc9("0x12")]("GET", _0x18ae07, !![]);
  return new Promise((_0x2d17bb, _0x228f50) => {
    this["http"]["onreadystatechange"] = function (_0x409339) {
      _0x409339 = _0x409339["currentTarget"];
      if (
        _0x409339[_0x3bc9("0x35")] == 0x4 &&
        _0x409339[_0x3bc9("0xd")] == 0xc8
      ) {
        let _0x5edca8 = JSON["parse"](_0x409339[_0x3bc9("0xe")]);
        _0x2d17bb(_0x5edca8);
      } else if (_0x409339["status"] != 0xc8) {
        _0x228f50({ status: ![] });
      }
    };
    this[_0x3bc9("0x14")][_0x3bc9("0x29")]();
  });
};
wowDamijingOpenApi[_0x3bc9("0x2")][_0x3bc9("0x2f")] = function (
  _0x3b6262,
  _0x4b21d3
) {
  this["http"]["open"]("POST", _0x3b6262, !![]);
  return new Promise((_0x4dbbc0, _0x2cb11d) => {
    this["http"][_0x3bc9("0x33")] = function () {
      if (xhr[_0x3bc9("0x35")] == 0x4 && xhr["status"] == 0xc8) {
        let _0x4efc73 = JSON["parse"](xhr[_0x3bc9("0xe")]);
        _0x4dbbc0({ status: !![], data: _0x4efc73 });
      } else if (xhr["status"] != 0xc8) {
        _0x2cb11d({ status: ![] });
      }
    };
  });
  _0x4b21d3 = JSON["stringify"](_0x4b21d3);
  this["http"]["send"](_0x4b21d3);
};
wowDamijingOpenApi["prototype"]["domInit"] = function () {
  let _0x4a23cd = document["querySelectorAll"]("a");
  _0x4a23cd[_0x3bc9("0x28")]((_0x3cb110) => {
    if (
      _0x3cb110[_0x3bc9("0xb")](_0x3bc9("0x2e"))[_0x3bc9("0x23")](
        _0x3bc9("0x1d")
      ) == 0x0
    )
      new wowDamijingToolTip(this[_0x3bc9("0x10")], this[_0x3bc9("0x22")])[
        "addToolTipEventListener"
      ](_0x3cb110, _0x3cb110["getAttribute"]("href"));
  });
};
let wowDamijingToolTip = function (_0x318d75, _0x36430b) {
  this["httpItemRequestUrl"] = _0x36430b;
  this[_0x3bc9("0x10")] = _0x318d75;
  this["itemId"] = 0x0;
  this[_0x3bc9("0x20")] = 0x14;
  this["itemData"] = undefined;
  this["point"] = { x: 0x0, y: 0x0 };
  this[_0x3bc9("0x18")] = undefined;
  this[_0x3bc9("0x1f")] = undefined;
  this["loadingCom"] = undefined;
  this["useable"] = ![];
};
wowDamijingToolTip["prototype"]["addToolTipEventListener"] = function (
  _0x34eb83,
  _0x2a97b5
) {
  if (_0x2a97b5["indexOf"]("?") > 0x0) {
    this[_0x3bc9("0x7")] = parseInt(
      _0x2a97b5["split"]("?")[0x0][_0x3bc9("0x32")]("/")[
        _0x2a97b5[_0x3bc9("0x32")](/[/]/)["length"] - 0x1
      ]
    );
  } else {
    this[_0x3bc9("0x7")] = parseInt(
      _0x2a97b5["split"]("/")[_0x2a97b5["split"](/[/]/)[_0x3bc9("0x27")] - 0x1]
    );
  }
  if (this["itemId"] > 0x0) {
    this[_0x3bc9("0x18")] = _0x34eb83;
    this[_0x3bc9("0x17")]();
  } else throw Error("鐗╁搧id鏃犳晥銆傦紙not\x20available\x20item\x20id锛�");
};
wowDamijingToolTip["prototype"]["domEventListener"] = function () {
  let _0x17dc35 = this;
  this[_0x3bc9("0x18")]["addEventListener"](
    _0x3bc9("0x4"),
    function (_0x5de0da) {
      _0x17dc35["useable"] = !![];
      if (_0x17dc35["itemData"] === undefined) {
        _0x17dc35["itemDetail"]()["then"]((_0x1aa9e8) => {
          if (_0x17dc35["useable"]) _0x17dc35["showToolTip"]();
        });
      } else {
        _0x17dc35["showToolTip"]();
      }
    }
  );
  this[_0x3bc9("0x18")][_0x3bc9("0x36")]("mousemove", function (_0x6b0483) {
    _0x17dc35["point"] = {
      x: _0x6b0483[_0x3bc9("0x0")],
      y: _0x6b0483[_0x3bc9("0x25")],
    };
    _0x17dc35["setToolTipMove"]();
  });
  this[_0x3bc9("0x18")][_0x3bc9("0x36")](_0x3bc9("0x30"), function (_0x34af6c) {
    _0x17dc35[_0x3bc9("0x6")] = ![];
    if (_0x17dc35[_0x3bc9("0x1f")]) {
      _0x17dc35["tooltipBox"]["remove"]();
      _0x17dc35["tooltipBox"] = undefined;
    }
    _0x17dc35["hideLoading"]();
  });
};
wowDamijingToolTip["prototype"][_0x3bc9("0x1c")] = async function () {
  this[_0x3bc9("0x8")]();
  let _0x1f2aa9 = await this[_0x3bc9("0x10")](
    this[_0x3bc9("0x22")] + this[_0x3bc9("0x7")]
  );
  if (!this["useable"]) {
    if (this[_0x3bc9("0x1f")]) this["tooltipBox"][_0x3bc9("0xc")]();
    this[_0x3bc9("0x1f")] = undefined;
    this["hideLoading"]();
    return;
  }
  if (_0x1f2aa9[_0x3bc9("0xd")]) {
    this[_0x3bc9("0x11")] = _0x1f2aa9["data"];
  } else this[_0x3bc9("0x11")] = undefined;
  this[_0x3bc9("0x1")]();
  return _0x1f2aa9;
};
wowDamijingToolTip[_0x3bc9("0x2")]["showLoading"] = function () {
  if (!this["tooltipBox"]) this["showToolTip"]();
  if (this[_0x3bc9("0x13")] === undefined) {
    this[_0x3bc9("0x13")] = document[_0x3bc9("0x34")]("div");
    this["loadingCom"][_0x3bc9("0x21")] = "damijing-open-tooltip-loading";
    this["loadingCom"]["innerHTML"] = _0x3bc9("0x1a");
    this[_0x3bc9("0x1f")][_0x3bc9("0x24")] =
      "<div\x20class=\x22damijing-open-tooltip-loading\x22><p>鍔犺浇涓�...</p></div>";
  }
  this["loadingCom"][_0x3bc9("0xa")][_0x3bc9("0x5")] =
    this[_0x3bc9("0x2b")]["x"] -
    this[_0x3bc9("0x13")][_0x3bc9("0x9")] -
    this[_0x3bc9("0x20")] +
    "px";
  this["loadingCom"]["style"][_0x3bc9("0x2d")] = this["point"]["y"] + "px";
};
wowDamijingToolTip[_0x3bc9("0x2")]["hideLoading"] = function () {
  if (this["loadingCom"]) {
    this["loadingCom"]["remove"]();
    this[_0x3bc9("0x13")] = undefined;
  }
  if (this["tooltipBox"]) {
    this["tooltipBox"]["remove"]();
    this["tooltipBox"] = undefined;
  }
};
wowDamijingToolTip[_0x3bc9("0x2")]["showToolTip"] = function () {
  if (this[_0x3bc9("0x1f")] === undefined) {
    this[_0x3bc9("0x1f")] = document["createElement"](_0x3bc9("0xf"));
    this["tooltipBox"][_0x3bc9("0x21")] = _0x3bc9("0x26");
    this["tooltipBox"][_0x3bc9("0x24")] = this[_0x3bc9("0x11")];
    document["body"][_0x3bc9("0x19")](this[_0x3bc9("0x1f")]);
  }
  this[_0x3bc9("0x16")]();
};
wowDamijingToolTip["prototype"]["setToolTipMove"] = function () {
  if (this[_0x3bc9("0x1f")]) {
    if (
      this["point"]["x"] + this[_0x3bc9("0x1f")][_0x3bc9("0x9")] >=
      document[_0x3bc9("0x3")]["clientWidth"]
    ) {
      this["tooltipBox"]["style"][_0x3bc9("0x5")] =
        this["point"]["x"] -
        this["tooltipBox"][_0x3bc9("0x9")] -
        this["distanceLeft"] +
        "px";
      this["tooltipBox"][_0x3bc9("0xa")]["top"] =
        this[_0x3bc9("0x2b")]["y"] + "px";
    } else {
      this[_0x3bc9("0x1f")]["style"][_0x3bc9("0x5")] =
        this["point"]["x"] + this["distanceLeft"] + "px";
      this[_0x3bc9("0x1f")]["style"]["top"] = this["point"]["y"] + "px";
    }
  }
};
