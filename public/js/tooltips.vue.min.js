const _0x2864 = [
  "currentTarget",
  "itemData",
  "httpGet",
  "showToolTip",
  "pageY",
  "readyState",
  "itemId",
  "open",
  "addToolTipEventListener",
  "stringify",
  "href",
  "left",
  "tooltipBox",
  "offsetWidth",
  "head",
  "mousemove",
  "domInit",
  "point",
  "mouseout",
  "className",
  "rel",
  "showLoading",
  "querySelectorAll",
  "POST",
  "loadingCom",
  "DOMContentLoaded",
  "itemDom",
  "getElementsByTagName",
  "useable",
  "nodeName",
  "innerHTML",
  "<div\x20class=\x22damijing-open-tooltip-loading\x22><p>加载中...</p></div>",
  "mouseEnterEvent",
  "appendChild",
  "length",
  "indexOf",
  "https://www.damijing.com/item/",
  "httpItemRequestUrl",
  "status",
  "setToolTipMove",
  "remove",
  "documentElement",
  "responseText",
  "appId",
  "distanceLeft",
  "prototype",
  "style",
  "body",
  "split",
  "createElement",
  "target",
  "damijing-open-tooltip",
  "addEventListener",
  "top",
  "domEventListener",
  "data",
  "hideLoading",
  "http",
  "itemDetail",
  "filter",
];
const _0x1217 = function (_0x28648c, _0x12176a) {
  _0x28648c = _0x28648c - 0x0;
  let _0x127907 = _0x2864[_0x28648c];
  return _0x127907;
};
function loadCSS(_0x348866) {
  var _0x158ab7 = document[_0x1217("0x31")]("link");
  _0x158ab7[_0x1217("0x14")] = "stylesheet";
  _0x158ab7["type"] = "text/css";
  _0x158ab7["href"] = _0x348866;
  document[_0x1217("0x1b")](_0x1217("0xe"))[0x0][_0x1217("0x21")](_0x158ab7);
}
let wowDamijingOpenApi = function (_0x38b8e4 = "") {
  this[_0x1217("0x2b")] = _0x38b8e4;
  this["http"] = new XMLHttpRequest();
  this["httpItemRequestUrl"] = "https://open.damijing.com/api/tooltip/item/";
};
wowDamijingOpenApi[_0x1217("0x2d")][_0x1217("0x2")] = function (_0x237731) {
  if (!this["http"]) this["http"] = new XMLHttpRequest();
  this["http"]["open"]("GET", _0x237731, !![]);
  return new Promise((_0x3cfe6c, _0x2e0c52) => {
    this["http"]["onreadystatechange"] = function (_0x1669e3) {
      _0x1669e3 = _0x1669e3[_0x1217("0x0")];
      if (
        _0x1669e3[_0x1217("0x5")] == 0x4 &&
        _0x1669e3[_0x1217("0x26")] == 0xc8
      ) {
        let _0x57824c = JSON["parse"](_0x1669e3[_0x1217("0x2a")]);
        _0x3cfe6c(_0x57824c);
      } else if (_0x1669e3["status"] != 0xc8) {
        _0x2e0c52({ status: ![] });
      }
    };
    this["http"]["send"]();
  });
};
wowDamijingOpenApi["prototype"]["httpPost"] = function (_0xfa591e, _0x2dfddf) {
  this[_0x1217("0x39")][_0x1217("0x7")](_0x1217("0x17"), _0xfa591e, !![]);
  return new Promise((_0xe77cbb, _0x4b51b7) => {
    this[_0x1217("0x39")]["onreadystatechange"] = function () {
      if (xhr["readyState"] == 0x4 && xhr["status"] == 0xc8) {
        let _0xb6230f = JSON["parse"](xhr["responseText"]);
        _0xe77cbb({ status: !![], data: _0xb6230f });
      } else if (xhr[_0x1217("0x26")] != 0xc8) {
        _0x4b51b7({ status: ![] });
      }
    };
  });
  _0x2dfddf = JSON[_0x1217("0x9")](_0x2dfddf);
  this["http"]["send"](_0x2dfddf);
};
wowDamijingOpenApi[_0x1217("0x2d")][_0x1217("0x10")] = function () {
  let _0x4f9a6e = document[_0x1217("0x16")]("a");
  _0x4f9a6e["forEach"]((_0x20ebb0) => {
    if (
      _0x20ebb0["getAttribute"](_0x1217("0xa"))[_0x1217("0x23")](
        "https://www.damijing.com/item/"
      ) == 0x0
    ) {
      new wowDamijingToolTip(this["httpGet"], this[_0x1217("0x25")])[
        "addToolTipEventListener"
      ](_0x20ebb0, _0x20ebb0["getAttribute"](_0x1217("0xa")));
    }
  });
};
let wowDamijingToolTip = function (_0x5299b4, _0x3c0280) {
  this[_0x1217("0x25")] = _0x3c0280;
  this[_0x1217("0x2")] = _0x5299b4;
  this[_0x1217("0x6")] = 0x0;
  this[_0x1217("0x2c")] = 0x14;
  this["itemData"] = undefined;
  this["point"] = { x: 0x0, y: 0x0 };
  this["itemDom"] = undefined;
  this["tooltipBox"] = undefined;
  this[_0x1217("0x18")] = undefined;
  this[_0x1217("0x1c")] = ![];
};
wowDamijingToolTip[_0x1217("0x2d")][_0x1217("0x8")] = function (
  _0x569a5b,
  _0x514102
) {
  if (_0x514102[_0x1217("0x23")]("?") > 0x0) {
    this[_0x1217("0x6")] = parseInt(
      _0x514102["split"]("?")[0x0][_0x1217("0x30")]("/")[
        _0x514102["split"](/[/]/)["length"] - 0x1
      ]
    );
  } else {
    this["itemId"] = parseInt(
      _0x514102["split"]("/")[_0x514102["split"](/[/]/)[_0x1217("0x22")] - 0x1]
    );
  }
  if (this[_0x1217("0x6")] > 0x0) {
    this[_0x1217("0x1a")] = _0x569a5b;
    this["domEventListener"]();
    return this;
  } else throw Error("鐗╁搧id鏃犳晥銆傦紙not\x20available\x20item\x20id锛�");
};
wowDamijingToolTip["prototype"][_0x1217("0x20")] = function () {
  this["useable"] = !![];
  if (this[_0x1217("0x1")] === undefined) {
    this[_0x1217("0x3a")]()["then"]((_0x324b5b) => {
      if (this[_0x1217("0x1c")]) this[_0x1217("0x3")]();
    });
  } else {
    this["showToolTip"]();
  }
};
wowDamijingToolTip["prototype"][_0x1217("0x36")] = function () {
  let _0xd2625a = this;
  this["itemDom"]["addEventListener"]("mouseenter", function (_0x5b82c3) {
    _0xd2625a[_0x1217("0x20")]();
  });
  this[_0x1217("0x1a")][_0x1217("0x34")](_0x1217("0xf"), function (_0x56ec7d) {
    _0xd2625a[_0x1217("0x11")] = {
      x: _0x56ec7d["pageX"],
      y: _0x56ec7d[_0x1217("0x4")],
    };
    _0xd2625a[_0x1217("0x27")]();
  });
  this["itemDom"][_0x1217("0x34")](_0x1217("0x12"), function (_0x1e5577) {
    _0xd2625a["useable"] = ![];
    if (_0xd2625a[_0x1217("0xc")]) {
      _0xd2625a[_0x1217("0xc")][_0x1217("0x28")]();
      _0xd2625a[_0x1217("0xc")] = undefined;
    }
    _0xd2625a[_0x1217("0x38")]();
  });
};
wowDamijingToolTip["prototype"]["itemDetail"] = async function () {
  this[_0x1217("0x15")]();
  let _0x5a0c3c = await this[_0x1217("0x2")](
    this["httpItemRequestUrl"] + this["itemId"]
  );
  if (!this[_0x1217("0x1c")]) {
    if (this[_0x1217("0xc")]) this[_0x1217("0xc")][_0x1217("0x28")]();
    this[_0x1217("0xc")] = undefined;
    this["hideLoading"]();
    return;
  }
  if (_0x5a0c3c["status"]) {
    this["itemData"] = _0x5a0c3c[_0x1217("0x37")];
  } else this["itemData"] = undefined;
  this["hideLoading"]();
  return _0x5a0c3c;
};
wowDamijingToolTip["prototype"]["showLoading"] = function () {
  if (!this[_0x1217("0xc")]) this[_0x1217("0x3")]();
  if (this[_0x1217("0x18")] === undefined) {
    this["loadingCom"] = document[_0x1217("0x31")]("div");
    this[_0x1217("0x18")][_0x1217("0x13")] = "damijing-open-tooltip-loading";
    this[_0x1217("0x18")]["innerHTML"] = "<p>加载中...</p>";
    this["tooltipBox"]["innerHTML"] = _0x1217("0x1f");
  }
  this[_0x1217("0x18")]["style"][_0x1217("0xb")] =
    this[_0x1217("0x11")]["x"] -
    this["loadingCom"][_0x1217("0xd")] -
    this[_0x1217("0x2c")] +
    "px";
  this["loadingCom"]["style"]["top"] = this["point"]["y"] + "px";
};
wowDamijingToolTip[_0x1217("0x2d")][_0x1217("0x38")] = function () {
  if (this[_0x1217("0x18")]) {
    this["loadingCom"]["remove"]();
    this["loadingCom"] = undefined;
  }
  if (this[_0x1217("0xc")]) {
    this[_0x1217("0xc")][_0x1217("0x28")]();
    this["tooltipBox"] = undefined;
  }
};
wowDamijingToolTip[_0x1217("0x2d")]["showToolTip"] = function () {
  if (this["tooltipBox"] === undefined) {
    this["tooltipBox"] = document[_0x1217("0x31")]("div");
    this["tooltipBox"][_0x1217("0x13")] = _0x1217("0x33");
    this[_0x1217("0xc")][_0x1217("0x1e")] = this["itemData"];
    document[_0x1217("0x2f")]["append"](this[_0x1217("0xc")]);
  }
  this[_0x1217("0x27")]();
};
wowDamijingToolTip["prototype"][_0x1217("0x27")] = function () {
  if (this["tooltipBox"]) {
    if (
      this[_0x1217("0x11")]["x"] + this["tooltipBox"]["offsetWidth"] >=
      document[_0x1217("0x29")]["clientWidth"]
    ) {
      this["tooltipBox"][_0x1217("0x2e")]["left"] =
        this[_0x1217("0x11")]["x"] -
        this["tooltipBox"][_0x1217("0xd")] -
        this[_0x1217("0x2c")] +
        "px";
      this[_0x1217("0xc")]["style"]["top"] = this[_0x1217("0x11")]["y"] + "px";
    } else {
      this[_0x1217("0xc")]["style"][_0x1217("0xb")] =
        this["point"]["x"] + this["distanceLeft"] + "px";
      this[_0x1217("0xc")][_0x1217("0x2e")][_0x1217("0x35")] =
        this[_0x1217("0x11")]["y"] + "px";
    }
  }
};
loadCSS("https://static.damijing.com/wow/open/tooltip.css.min.css");
let _wowDamijingOpenApi = new wowDamijingOpenApi();
function init() {
  _wowDamijingOpenApi["domInit"]();
}
let wowDamijingToolTipList = [];
document[_0x1217("0x34")](_0x1217("0x19"), function () {
  var _0x14a9a1 = document["getElementById"]("__nuxt");
  function _0x47500c(_0x37e953) {
    var _0x427566 = _0x37e953["target"]["getAttribute"]("href");
    if (_0x427566[_0x1217("0x23")](_0x1217("0x24")) == 0x0) {
      if (
        wowDamijingToolTipList[_0x1217("0x3b")](
          (_0x5e703d) =>
            _0x5e703d["href"] == _0x427566 &&
            _0x5e703d[_0x1217("0x32")] == _0x37e953[_0x1217("0x32")]
        )[_0x1217("0x22")] == 0x0
      ) {
        let _0x3d19b6 = new wowDamijingToolTip(
          _wowDamijingOpenApi["httpGet"],
          _wowDamijingOpenApi["httpItemRequestUrl"]
        )["addToolTipEventListener"](
          _0x37e953["target"],
          _0x37e953["target"]["getAttribute"]("href")
        );
        wowDamijingToolTipList["push"]({
          href: _0x427566,
          target: _0x3d19b6,
          target: _0x37e953[_0x1217("0x32")],
        });
        _0x3d19b6[_0x1217("0x20")]();
      }
    }
  }
  _0x14a9a1["addEventListener"]("mousemove", function (_0x406cf8) {
    if (_0x406cf8["target"] && _0x406cf8["target"][_0x1217("0x1d")] === "A") {
      _0x47500c(_0x406cf8);
    }
  });
});
window["damijingToolTip"] = init;
